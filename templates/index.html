<!doctype html class="homepage">
<html lang="en">
    <head>
        <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/static/css/mystyles.css" />
        <link rel="stylesheet" href="/static/css/tablesort.css" />


        <script src='/static/javascripts/searchTable.js'></script>
        <script src='/static/javascripts/tablesort.min.js'></script>
        <script src='/static/javascripts/tablesort.number.js'></script>


    </head>
    <body class="mainpage">

        <div class="container">

        <h1>Restaurant health scores across San Francisco</h1>

        <h3>There are {{ object_list | length }} food service businesses in SF with listed health scores. Below are the results of their most recent inspections.</h3>

        <div class="floating-box">
            <h1>27</h1>
            <h5>'$$$' restaurants on Yelp's max-$$$$ price scale had a "high risk" health code violation.</h5>
        </div>
        <div class="floating-box">
            <h1>320</h1>
            <h5>food service businesses received perfect health scores during their most recent inspection.</h5>
        </div>
        <div class="floating-box">
            <h1>34</h1>
            <h5>food service businesses rated 4.5 or higher on Yelp had a high risk violation.</h5>
        </div>

        <input type="text" id="myInput" onkeyup="searchFunction()" placeholder="Search by business name, Risk category or Yelp category...">

             <div style="height:500px;overflow:auto;">
             <table border=1 cellpadding=7 class="sortable" id="myTable">

<thead>
                <tr>
                    <th>Name</th>
                    <th>Inspection Score</th>
                    <th>Risk Category</th>
                    <th>Yelp Rating</th>
                    <th>Yelp Price</th>
                    <th>Yelp Category</th>
                </tr>
</thead>

<tbody>
                {% for obj in object_list %}
                <tr>
                    <td><a href="/business/{{ obj.business_id }}">{{ obj.business_name }}</a></td>
                    <td>{{ obj.inspection_score }}</td>
                    <td>{{ obj.risk_category }}</td>
                    <td><a href="/rating/{{ obj.yelp_rating }}">{{ obj.yelp_rating }}</a></td>
                    <td><a href="/price/{{ obj.yelp_price }}">{{ obj.yelp_price }}</a></td>
                    <td><a href="/category/{{ obj.yelp_category }}">{{ obj.yelp_category }}</a></td>
                </tr>
                {% endfor %}

</tbody>
        </table>
        </div>
        </div>

        <ul>
            <li>Health score data is from the <a href="https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i/data">DataSF LIVES Standard data</a>.</li>
            <li>Yelp data is from the <a href="https://www.yelp.com/developers/documentation/v3">Yelp Fusion API</a>.</li>
            <li>Made in June 2017 by Katlyn Alo for Computational Journalism at Stanford, taught by Dan Nguyen.
            See the source code on <a href="https://github.com/Kat-Alo/sf-health-scores/">Github</a>.</li>
        </ul>



        <script type="text/javascript">
          new Tablesort(document.getElementById('myTable'));
        </script>


    </body>
</html>



